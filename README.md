# contacts_project

### Описание и алгоритм работы программы

1. **Чтение входных данных**:  
   Программа принимает на вход текстовый файл `contacts.txt`, содержащий список строк. Каждая строка представляет собой запись, например, "Иванов;Иван;Иванович;+79161234567".

2. **Создание выходной директории**:  
   Если директория для выходных данных (`results`) отсутствует, программа создаёт её.

3. **Чтение содержимого файла**:  
   Все строки из входного файла считываются в вектор строк `lines`.

4. **Разделение данных на сегменты**:  
   Список строк делится на 4 равные части (сегменты) для параллельной обработки. Если строк недостаточно для равномерного деления, последние сегменты будут содержать меньше данных.

5. **Параллельная обработка**:  
   Для каждого сегмента создаётся отдельный поток:
   - **Сортировка строк по первой букве**: Каждая строка преобразуется в Unicode (`wstring`), и первая буква используется в качестве ключа для группировки.  
   - **Запись в хеш-таблицу**: Результаты группируются в локальные хеш-таблицы, где ключом является первая буква строки, а значением — вектор строк, начинающихся на эту букву.  
   - **Отслеживание времени выполнения**: Для каждого потока измеряется время обработки.

6. **Объединение результатов**:  
   После завершения всех потоков данные из локальных хеш-таблиц объединяются в одну общую хеш-таблицу.

7. **Запись результатов в файлы**:  
   Для каждой группы (по первой букве) создаётся отдельный файл в директории `results`. Имя файла соответствует первой букве группы (например, `И.txt` для строк, начинающихся на букву "И").  
   Все строки из соответствующей группы записываются в соответствующий файл.

8. **Вывод времени выполнения потоков**:  
   На экран выводится время, затраченное каждым потоком на обработку своих данных. Время округляется до 8 знаков после запятой.

9. **Завершение программы**:  
   После записи всех данных в файлы программа завершается.

---

### Пример работы
**Входной файл (`contacts.txt`)**:
```
Иванов;Иван;Иванович;+79161234567
Сидоров;Сидор;Сидорович;+79361234569
Петров;Петр;Петрович;+79261234568
Егоров;Егор;Егорович;+79231234564
```

**Результат (файлы в папке `results`)**:
- `И.txt`:
  ```
  Иванов;Иван;Иванович;+79161234567
  ```
- `С.txt`:
  ```
  Сидоров;Сидор;Сидорович;+79361234569
  ```
- `П.txt`:
  ```
  Петров;Петр;Петрович;+79261234568
  ```
- `Е.txt`:
  ```
  Егоров;Егор;Егорович;+79231234564
  ```

**Вывод времени**:
```
Время выполнения потока 1: 0.12345678 секунд
Время выполнения потока 2: 0.23456789 секунд
Время выполнения потока 3: 0.34567890 секунд
Время выполнения потока 4: 0.45678901 секунд
```

### Описание тестов:

1. **Тест 1: Basic Functionality**  
   Этот тест проверяет базовую функциональность программы.  
   - На вход подается файл `contacts.txt` с данными, содержащими имена, фамилии, отчества и номера телефонов.  
   - Программа разделяет контакты на файлы, основываясь на первой букве фамилии.  
   - Например, для фамилий, начинающихся на "И", создается файл `И.txt`.

2. **Тест 2: Mixed Alphabets**  
   Тестирует работу программы с данными, содержащими имена на разных алфавитах (например, латиница и кириллица).  
   - Входные данные включают записи как на русском, так и на английском языке.  
   - Программа должна корректно распределить данные в файлы, например, фамилии "Smith" и "Taylor" в файлы `S.txt` и `T.txt`, а фамилии на кириллице в соответствующие файлы.

3. **Тест 3: Duplicate Handling**  
   Проверяет, как программа обрабатывает дублирующиеся записи и записи с одинаковыми фамилиями.  
   - На вход подаются записи, где фамилии повторяются или отличаются только в других полях (имя, отчество, номер).  
   - Например, для "Иванов;Иван;Иванович" и "Исаев;Иван;Иванович" создается общий файл `И.txt`, где сохраняются обе записи.  

4. **Тест 4: Empty Input**  
   Проверяет работу программы при отсутствии данных.  
   - На вход подается пустой файл `contacts.txt`.  
   - Программа не должна создавать никаких файлов в выходной директории, поскольку входные данные отсутствуют.  

---

### Алгоритм работы скрипта с тестами:

1. **Выбор теста пользователем:**  
   В начале работы программы пользователь выбирает, какой тест запустить. Для этого отображается меню с номерами и названиями доступных тестов.

2. **Создание входных данных для выбранного теста:**  
   На основе предопределенного набора тестовых данных создается входной файл `contacts.txt`.

3. **Очистка выходной директории:**  
   Перед запуском основного приложения директория `results` очищается, чтобы избежать влияния старых результатов.

4. **Запуск основного приложения:**  
   После подготовки данных программа запускает основное приложение `parallel_processing`, которое обрабатывает входной файл и создает выходные файлы.

5. **Сравнение результатов:**  
   После завершения работы основного приложения скрипт проверяет выходные файлы:  
   - Сравнивает содержимое файлов с ожидаемыми результатами.  
   - Проверяет наличие всех ожидаемых файлов.  

6. **Вывод результатов теста:**  
   - Если тест пройден успешно, на экране отображается сообщение о его успешном завершении.  
   - В случае ошибок выводятся подробности: отсутствующие файлы, несоответствие содержимого или ошибка выполнения программы.

7. **Повторное отображение меню:**  
   После завершения теста программа возвращает пользователя в меню для выбора следующего теста или выхода из программы.
